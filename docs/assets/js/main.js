"use strict";const searchInput=document.querySelector(".search__input"),searchButton=document.querySelector(".search__button"),resetButton=document.querySelector(".reset__button"),resultList=document.querySelector(".results__list"),myFavoriteList=document.querySelector(".favorites__list"),defaultImage="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT83m54gAolcMA_rV6DRKCNfP0r_M_dxZ1BBVeVJ6c-StaEz07w";let arrFavorites=[];const lsUserFavoriteShow=localStorage.getItem("user-favorites-shows");function handleButtonClick(){const e=searchInput.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){resultList.innerHTML="";for(let t=0;t<e.length;t++){const r=e[t];let a,s=r.show.name,i=r.show.id;const n=createLiNewElement(a=null===r.show.image?defaultImage:r.show.image.medium,s,i);resultList.appendChild(n),n.addEventListener("click",handlerClickFavorite)}})}function createLiNewElement(e,t,r){const a=document.createElement("li");a.classList.add("result__list__element"),a.setAttribute("show-id",r);const s=document.createElement("img");s.src=e,s.alt=t,s.classList.add("result__image"),a.appendChild(s);const i=document.createElement("h2");i.classList.add("result__name");const n=document.createTextNode(t);return i.appendChild(n),a.appendChild(i),a}function handlerClickFavorite(){let e=event.currentTarget;e.classList.add("select-User-Fav");let t=event.currentTarget.getAttribute("show-id");const r={id:t,src:e.firstChild.src,title:e.lastChild.innerHTML};showFavExist(t)||(arrFavorites.push(r),printFavoriteArray(),localStorage.setItem("user-favorites-shows",JSON.stringify(arrFavorites)))}function showFavExist(e){let t=!1;for(let r=0;r<arrFavorites.length;r++)arrFavorites[r].id.includes(e)&&(t=!0);return t}function printFavoriteArray(){myFavoriteList.innerHTML="";for(let e=0;e<arrFavorites.length;e++)myFavoriteList.innerHTML+=`<li data-show-id="${arrFavorites[e].id}" class="favoriteElement">\n        <button class="remove-fav-element">‚ùå</button>\n        <img src="${arrFavorites[e].src}" alt="${arrFavorites[e].title}" class="favorite__image">\n        <h3 class="favorite__name">${arrFavorites[e].title}</h3>\n    </li>`;const e=document.querySelectorAll(".remove-fav-element");for(let t=0;t<arrFavorites.length;t++)e[t].addEventListener("click",handleRemoveFavorite)}function handleRemoveFavorite(){const e=event.currentTarget.parentElement.getAttribute("data-show-id");for(let t=0;t<arrFavorites.length;t++)e===arrFavorites[t].id&&(arrFavorites.splice(t,1),printFavoriteArray(),localStorage.setItem("user-favorites-shows",JSON.stringify(arrFavorites)))}function handleResetButton(){arrFavorites=[],printFavoriteArray(),localStorage.removeItem("user-favorites-shows")}lsUserFavoriteShow&&(arrFavorites=JSON.parse(lsUserFavoriteShow),printFavoriteArray()),searchButton.addEventListener("click",handleButtonClick),resetButton.addEventListener("click",handleResetButton);